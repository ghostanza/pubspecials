'use strict';function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}return Array.from(a)}var http=require('http'),args=process.argv.slice(2),flags=[],toShow=[],lookup={flagsToNames:{a:'appetizer',p:'big plates',s:'soup',g:'burger',b:'beer specials',f:'catch',c:'from the bar'},namesToHeadings:{appetizer:'APPETIZERS','big plates':'BIG PLATES',soup:'SOUP',burger:'BURGER','catch':'CATCH OF THE DAY','from the bar':'COCKTAILS','beer specials':'BEER SPECIALS'}},markup=' ';for(i in args)'-'==args[i][0]&&flags.push.apply(flags,_toConsumableArray(args[i].slice(1).split('')));flags.includes('h')?console.log('\n      Need Help?\n      Do not use any flags if you want to see all of the specials.\n\n      FLAGS (can be combined):\n      [-a]: appetizers\n      [-b]: beer\n      [-c]: cocktails\n      [-f]: catch of the day\n      [-g]: burger\n      [-p]: big plates\n      [-s]: soup\n\n      HELP:\n      [-h]: Will override any other flags and display this help menu\n\n      EXAMPLES:\n        node thechris.js -ac (will return appetizers and cocktails)\n        node thechris.js -p -s (big plates / soup)\n    '):http.get('http://christopherscambridge.com.s122913.gridserver.com/menus/194-2',function(a){a.on('data',function(b){markup+=''+b}).on('end',function(){if(markup.length){markup=markup.split(/[\n\t]/).join('');var d=/updated ([^<&-]*)?/g,g=d.exec(markup)[1];if(console.log('+++++++++++++++++++++++\nUPDATED ON '+g+'\n+++++++++++++++++++++++'),flags.length)for(k in lookup.flagsToNames)flags.includes(k)&&toShow.push(lookup.flagsToNames[k]);else toShow.push.apply(toShow,_toConsumableArray(Object.keys(lookup.namesToHeadings)));var h=findItemInfo(toShow,markup);console.log(h+'\n')}})}).on('error',function(a){console.log('ERROR: '+a.message)});function findItemInfo(a,b){var d='';for(n in a){var g=new RegExp(a[n]+'.*?</h6>(.*?)<h6','gi'),h=g.exec(b),l='\n\n'+lookup.namesToHeadings[a[n]]+'\n====================\n';if(1<h.length){var o=h[1].split(/<\/p>/).slice(0,-1);for(j in o){if('beer specials'==a[n]&&o[j].match(/<h1>/g)){var p=/<h1>.*?<strong>(.*?)<\//g,q=p.exec(o[j]);1<q.length&&(o[j]='\n--------------------\n '+q[1].toUpperCase()+' \n--------------------\n'+o[j],o[j]=o[j].replace(/(<h1>.*?<\/h1>)/g,''))}o[j]=o[j].replace(/<br.*?\/>/g,'<br/>\n'),o[j]=o[j].replace(/<.*?>/g,''),o[j]=o[j].replace(/&amp;/g,'and'),o[j]=o[j].replace(/&#8217;/g,'\''),o[j]=o[j].replace(/(\d+\.\d+)/g,'\n- $1\n')}l+=o.join('\n')}d+=l}return d}
